/**
 * Tree-sitter grammar for MiniLang
 * Generated by treelsp - do not edit manually
 */

module.exports = grammar({
  name: "MiniLang",

  word: $ => $.identifier,

  rules: {
    program: $ => repeat($.statement),

    statement: $ => choice(
      $.variable_decl,
      $.expr_statement
    ),

    variable_decl: $ => seq(
      "let",
      field("name", $.identifier),
      "=",
      field("value", $.expression),
      ";"
    ),

    expr_statement: $ => seq(
      field("expr", $.expression),
      ";"
    ),

    expression: $ => choice(
      $.binary_expr,
      $.identifier,
      $.number
    ),

    binary_expr: $ => choice(
      prec.left(1, seq(
        field("left", $.expression),
        field("op", "+"),
        field("right", $.expression)
      )),
      prec.left(1, seq(
        field("left", $.expression),
        field("op", "-"),
        field("right", $.expression)
      )),
      prec.left(2, seq(
        field("left", $.expression),
        field("op", "*"),
        field("right", $.expression)
      )),
      prec.left(2, seq(
        field("left", $.expression),
        field("op", "/"),
        field("right", $.expression)
      ))
    ),

    identifier: $ => token(/[a-zA-Z_][a-zA-Z0-9_]*/),

    number: $ => token(/[0-9]+/)
  }
});
